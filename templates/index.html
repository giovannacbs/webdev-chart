<html>
<head>
    <link rel="stylesheet" href="static/style.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Anton&family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap');
    </style>
    <title>Educação Índigena</title>
</head>
<body> 
    <h1>Educação Índigena no Brasil</h1>
    <div id="grafico_area"></div>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script>
        const margin = {top: 30, right: 30, bottom: 30, left: 60}; // Aumente o margin.bottom se precisar de mais espaço para o título do eixo Y

        // Gráfico de Área
        const svgArea = d3.select("#grafico_area")
        .append("svg")
            .attr("viewBox", '0 0 600 300')
            .attr("preserveAspectRatio", "xMidYMid meet")
            .append("g")
            .attr("transform", `translate(${margin.left},${margin.top})`);
        
        const width = 500 - margin.left - margin.right;
        const height = 250 - margin.top - margin.bottom;

        // Base de dados:
        const data = [
            { year: 2011, value: 2954 },
            { year: 2012, value: 2957 },
            { year: 2013, value: 3061 },
            { year: 2014, value: 3136 },
            { year: 2015, value: 3085 },
            { year: 2016, value: 3212 },
            { year: 2017, value: 3307 },
            { year: 2018, value: 3357 },
            { year: 2019, value: 3380 },
            { year: 2020, value: 3362 },
            { year: 2021, value: 3466 },
            { year: 2022, value: 3599 },
            { year: 2023, value: 3628 }
        ];

        // Eixo Y:
        const y = d3.scaleLinear()
            .domain([0, d3.max(data, d => d.value)])
            .range([height, 0]);     

        svgArea.append("g") 
            .call(d3.axisLeft(y))
            .selectAll(".tick line").remove();

        svgArea.append("text")
            .attr("class", "y-axis-label")
            .attr("text-anchor", "middle")
            .attr("y", -margin.left)  // Ajuste a posição Y do rótulo do eixo Y
            .attr("x", -height / 2)  // Ajuste a posição X para que fique centralizado verticalmente
            .attr("dy", ".71em")
            .attr("transform", "rotate(-90)")
            .style("text-anchor", "middle")
            .style("font-size", "12px") // Ajuste o tamanho da fonte conforme necessário
            .style("fill", "#000") // Cor do texto
            .text("Número de escolas");  // Nome do eixo Y com quebra de linha

        svgArea.select("text.y-axis-label")
            .append("tspan")
            .attr("x",  -height / 2)
            .attr("dy", ".9em")
            .text("com educação índigena");

        // Eixo X:
        const x = d3.scaleBand()
            .range([0, width])
            .domain(data.map(d => d.year))

        svgArea.append("g")
            .attr("transform", `translate(0, ${height})`)
            .call(d3.axisBottom(x))
            .selectAll("text")
                .style("text-anchor", "end");

        svgArea.selectAll(".tick line").remove();

        // Definindo a área
        const area = d3.area()
            .x(d => x(d.year))  // Ajuste para centralizar os pontos
            .y0(height)
            .y1(d => y(d.value));

        // Adicionando a área ao gráfico
        svgArea.append("path")
            .datum(data)
            .attr("fill", "#4f7e52")
            .attr("d", area);

    </script>    
</body>
</html>
